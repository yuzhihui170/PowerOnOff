package com.example.poweronoff;import android.app.Activity;import android.app.DatePickerDialog;import android.app.TimePickerDialog;import android.content.Intent;import android.os.Bundle;import android.util.Log;import android.view.View;import android.widget.Button;import android.widget.DatePicker;import android.widget.EditText;import android.widget.TextView;import android.widget.TimePicker;import android.widget.Toast;public class MainActivity extends Activity {    private final static String TAG = "yzh";    private Button mBtnSetOff;    //edittext 输入关机时间    private EditText mEtTimeoff;    //edittext 输入开机时间    private EditText mEtTimeon;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_main);        setViewListener();    }    private void setViewListener() {        mEtTimeoff = (EditText) findViewById(R.id.et_timeoff);        mEtTimeon = (EditText) findViewById(R.id.et_timeon);        mBtnSetOff = (Button) findViewById(R.id.btn_off);        mBtnSetOff.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                Intent intent = new Intent();                intent.setAction("android.56iq.intent.action.setpoweronoff");                intent.putExtra("enable",true);                //获取开机时间                String timeonStr = mEtTimeon.getText().toString();                String[] timeonStrs = timeonStr.split("-");                if(timeonStrs.length < 5) {                    Log.d(TAG, "timeonStr:"+timeonStr);                    Toast.makeText(MainActivity.this, "time on 参数错误", Toast.LENGTH_LONG).show();                    return;                }                int mOnYear = Integer.parseInt(timeonStrs[0]);                int mOnMonth = Integer.parseInt(timeonStrs[1]);                int mOnDay = Integer.parseInt(timeonStrs[2]);                int mOnHour = Integer.parseInt(timeonStrs[3]);                int mOnMinute = Integer.parseInt(timeonStrs[4]);                int[] timeonArray = {mOnYear, mOnMonth, mOnDay, mOnHour, mOnMinute};                intent.putExtra("timeon",timeonArray);                Log.d(TAG, "mOnYear:" + mOnYear + " mOnMonth:" + mOnMonth + " mOnDay:" + mOnDay + " mOnHour:" + mOnHour + " mOnMinute:" + mOnMinute);                //获取关机时间                String timeoffStr = mEtTimeoff.getText().toString();                String[] timeoffStrs = timeoffStr.split("-");                if(timeoffStrs.length < 5) {                    Log.d(TAG, "timeoffStr:"+timeoffStr);                    Toast.makeText(MainActivity.this, "time off 参数错误", Toast.LENGTH_LONG).show();                    return;                }                int mOffYear = Integer.parseInt(timeoffStrs[0]);                int mOffMonth = Integer.parseInt(timeoffStrs[1]);                int mOffDay = Integer.parseInt(timeoffStrs[2]);                int mOffHour = Integer.parseInt(timeoffStrs[3]);                int mOffMinute = Integer.parseInt(timeoffStrs[4]);                int[] timeoffArray = {mOffYear, mOffMonth, mOffDay, mOffHour, mOffMinute};                intent.putExtra("timeoff",timeoffArray);                //发送广播到系统                MainActivity.this.sendBroadcast(intent);                Toast.makeText(MainActivity.this, "发送开关机广播", Toast.LENGTH_LONG).show();                Log.d(TAG, "mOffYear:" + mOffYear + " mOffMonth:" + mOffMonth + " mOffDay:" + mOffDay + " mOffHour:" + mOffHour + " mOffMinute:" + mOffMinute);            }        });    }}